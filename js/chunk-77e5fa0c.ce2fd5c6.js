(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-77e5fa0c"],{"53ca":function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));r("a4d3"),r("e01a"),r("d3b7"),r("d28b"),r("3ca3"),r("ddb0");function n(e){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}},"781b":function(e,t,r){},8349:function(e,t,r){"use strict";r("781b")},d74a:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-card",{staticClass:"login-module",attrs:{shadow:"always",id:"login"}},[r("el-form",[r("div",{staticClass:"horiz-container form-title"},[r("span",[e._v("用户登录")]),r("div",{staticClass:"spacer"}),r("span",[r("router-link",{attrs:{to:"/"}},[r("i",{staticClass:"fa fa-home fa-2x",attrs:{"aria-hidden":"true"}})])],1)]),r("el-form-item",[r("el-input",{attrs:{type:"text","prefix-icon":"fa fa-user-o",placeholder:"用户名"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),r("el-form-item",[r("el-input",{attrs:{type:"password","prefix-icon":"fa fa-lock",placeholder:"密码"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),r("el-form-item",[r("el-button",{staticClass:"full-width",attrs:{type:"primary"},on:{click:e.login}},[e._v("登录")])],1),r("div",{staticClass:"horiz-container"},[r("div",{staticClass:"spacer"}),r("router-link",{staticClass:"mx-2",attrs:{to:"/password_reset"}},[r("el-link",{attrs:{underline:!1,type:"warning"}},[e._v("忘记密码")])],1),r("router-link",{staticClass:"mx-2",attrs:{to:"/signup"}},[r("el-link",{attrs:{underline:!1,type:"danger"}},[e._v("没有账号")])],1)],1)],1)],1)},a=[],s=r("1da1"),o=(r("96cf"),r("fee1")),u=r("5c96"),c={name:"Login",data:function(){return{username:"zhangsan",password:"123456",loading:""}},methods:{login:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,n,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.showLoading("#login","正在登录中..."),t.next=3,o["a"].logIn(e.username,e.password);case 3:if(r=t.sent,"ok"!=r.status_code){t.next=15;break}return n=localStorage.getItem("preRoute"),t.next=8,o["a"].getToken();case 8:a=t.sent,localStorage.setItem("token",a),console.log("response.user:",r.user),e.$store.commit("SET_CURRENT_USER",e.getUser(r.user)),null===n||"/"===n||"/account"===n||"/login"===n?e.$router.push({path:"/dashboard"}):e.$router.push({path:n}),t.next=27;break;case 15:s="",t.t0=r.status_code,t.next="210"===t.t0?19:"211"===t.t0?21:"219"===t.t0?23:25;break;case 19:return s="用户名和密码不匹配",t.abrupt("break",26);case 21:return s="找不到用户",t.abrupt("break",26);case 23:return s="登录失败次数超过限制，请稍候再试，或者通过忘记密码重设密码",t.abrupt("break",26);case 25:s="请求被终止，请检查网络连接状况";case 26:e.$notify.error({title:"登录失败",message:s,showClose:!1});case 27:e.endLoading();case 28:case"end":return t.stop()}}),t)})))()},getUser:function(e){return{id:e.id,username:e.get("username"),email:e.get("email")}},showLoading:function(e,t){this.loading=u["Loading"].service({lock:!0,text:t,target:document.querySelector(e)})},endLoading:function(){this.loading.close()}}},i=c,l=(r("8349"),r("2877")),p=Object(l["a"])(i,n,a,!1,null,null,null);t["default"]=p.exports},fee1:function(e,t,r){"use strict";var n=r("53ca"),a=r("1da1"),s=r("d4ec"),o=r("bee2"),u=(r("96cf"),r("c72e")),c=r.n(u),i=function(){function e(){Object(s["a"])(this,e)}return Object(o["a"])(e,[{key:"signUp",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,s,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=o.length>2&&void 0!==o[2]?o[2]:"",e.prev=1,a=new c.a.User,a.setUsername(t),a.setPassword(r),a.set("nickname",t),n&&a.setEmail(n),e.next=9,a.signUp();case 9:return s=e.sent,console.log("注册账号成功：",s),e.abrupt("return",{status_code:"ok",user:s});case 14:return e.prev=14,e.t0=e["catch"](1),console.log("注册账号失败：",e.t0.code,e.t0),e.abrupt("return",{status_code:e.t0.code,user:null});case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"logIn",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.User.logIn(t,r);case 3:if(n=e.sent,!n){e.next=7;break}return console.log("登录成功:",n),e.abrupt("return",{status_code:"ok",user:n});case 7:e.next=13;break;case 9:return e.prev=9,e.t0=e["catch"](0),console.log("登录失败：",e.t0.code,e.t0),e.abrupt("return",{status_code:e.t0.code,user:null});case 13:return e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"logOut",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",c.a.User.logOut());case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"passwordResetByEmail",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.User.requestPasswordReset(t);case 3:return r=e.sent,console.log(r.code,Object(n["a"])(r)),e.abrupt("return",{status_code:"ok"});case 8:return e.prev=8,e.t0=e["catch"](0),console.log("发送邮件：",e.t0.code,e.t0),e.abrupt("return",{status_code:e.t0.code});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getToken",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",c.a.User.current().getSessionToken());case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}]),e}();t["a"]=new i}}]);
//# sourceMappingURL=chunk-77e5fa0c.ce2fd5c6.js.map